<% if @product.has_variants? %>
<div id="product-variants">
	<% @product.grouped_option_values.each do |type, values| %>
	<h2 class="variant-option-type"><%= type.presentation %></h2>

	<div class="variants-buttons ui-buttonset">
		<% has_checked = false
		values.sort_by(&:position).each do |value| %>
		<% unless (variants = @product.variants_for_option_value(value)).empty? %>
		<% variants.each do |v|
		next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products])
		checked = !has_checked && (v.in_stock || Spree::Config[:allow_backorders])
		has_checked = true if checked %>
		<%= radio_button_tag "products[#{@product.id}]", v.id, checked, :disabled => !v.in_stock && !Spree::Config[:allow_backorders], 'data-price' => v.price_in(current_currency).display_price %>
		<label for="<%= ['products', @product.id, v.id].join('_') %>" > <span class="variant-description"> <%= value.presentation %> </span> </label>

		<% end %>
		<% end %>
		<% end %>
	</div>
	<% end %>
</div>
<% end%>